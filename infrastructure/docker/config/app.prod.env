# ==============================================
# VPN ENTERPRISE - PRODUCTION CONFIGURATION
# ==============================================
# Non-sensitive environment-specific values for production

# Application Environment
NODE_ENV=production
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=info

# Service URLs (internal Docker DNS)
API_BASE_URL=http://vpn-api:5000
WEB_BASE_URL=http://vpn-web:3000
PYTHON_API_URL=http://vpn-python-api:5001

# Database Configuration (non-sensitive)
DB_HOST=vpn-postgres
DB_PORT=5432
DB_NAME=platform_db
DB_USER=platform_admin
DB_POOL_MAX=50
DB_POOL_MIN=5
DB_POOL_IDLE_TIMEOUT=30000
DB_POOL_CONNECTION_TIMEOUT=5000

# DatabasePlatformClient (API code expects POSTGRES_* vars)
POSTGRES_HOST=vpn-postgres
POSTGRES_PORT=5432
POSTGRES_DB=platform_db

# Supabase Configuration (for authentication and user management)
SUPABASE_URL=https://wgmgtxlodyxbhxfpnwwm.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndnbWd0eGxvZHl4Ymh4ZnBud3dtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI1MzM0NzUsImV4cCI6MjA3ODEwOTQ3NX0.1MLDtx4lEb8Uewq1p9O5GvtHTQsmdvB6JF1DjBKUWro
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndnbWd0eGxvZHl4Ymh4ZnBud3dtIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjUzMzQ3NSwiZXhwIjoyMDc4MTA5NDc1fQ.vCAtkPCjwiSBdai83CGsd-U5VjGKTBON9NkWb3yzM_M
POSTGRES_USER=platform_admin

# Tenant registry source
# In self-hosted deployments we still use SUPABASE_* for authentication, but the tenant registry
# (used by the Database UI under /databases) lives in the local platform Postgres `tenants` table.
# Set this to force /api/v1/tenants to read from Postgres instead of Supabase.
TENANTS_SOURCE=platform

# Redis Configuration (non-sensitive)
REDIS_HOST=vpn-redis
REDIS_PORT=6379
REDIS_DB=0

# Realtime scaffold is currently disabled; avoid Redis connection noise in prod.
REALTIME_DISABLE_REDIS=1

# N8N Configuration
# n8n is exposed behind nginx under /admin/n8n and should generate links accordingly.
N8N_HOST=chatbuilds.com
# IMPORTANT: N8N_PORT controls the port n8n LISTENS on inside the container.
# nginx talks to n8n over the Docker network on port 5678.
N8N_PORT=5678
N8N_PROTOCOL=https
# IMPORTANT: include trailing slash so n8n generates correct asset URLs under this prefix.
N8N_PATH=/admin/n8n/
N8N_EDITOR_BASE_URL=https://chatbuilds.com/admin/n8n/
WEBHOOK_URL=https://chatbuilds.com/admin/n8n/
N8N_TRUST_PROXY=true

# Admin bootstrap (optional)
# Comma-separated list of emails that should be treated as admin by the API's adminMiddleware.
# Example: ADMIN_EMAILS=alice@example.com,bob@example.com
# Leave unset to rely strictly on user roles.
# ADMIN_EMAILS=
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=vpn-postgres
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=platform_db
DB_POSTGRESDB_USER=platform_admin

# Ollama Configuration
OLLAMA_HOST=vpn-ollama
OLLAMA_PORT=11434

# CORS Configuration
# Set your real allowed origins in ../../.env.production (ALLOWED_ORIGINS and/or CORS_ORIGINS).

# Feature Flags (Production)
ENABLE_HOT_RELOAD=false
ENABLE_DEBUG_ENDPOINTS=false
ENABLE_SWAGGER_UI=false
ENABLE_PROFILING=false

# Logging
LOG_FORMAT=json
LOG_TIMESTAMPS=true

# Session Configuration
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict
SESSION_MAX_AGE=3600000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# SSL/TLS
SSL_CERT_PATH=/etc/ssl/certs/server.crt
SSL_KEY_PATH=/etc/ssl/private/server.key
