# Nginx Configuration for SPA (Single Page Application)
# 
# Description: This configuration file sets up an Nginx server to serve a Single Page Application
# with optimized performance through compression and caching strategies.
#
# Key Features:
# - Listens on port 80 for HTTP traffic
# - Serves content from /usr/share/nginx/html directory
# - Enables gzip compression for text-based resources to reduce bandwidth
# - Implements client-side routing support for SPAs (redirects all routes to index.html)
# - Configures aggressive caching (1 year) for static assets like images, fonts, and stylesheets
# 
# Server Configuration:
# - Port: 80
# - Server Name: localhost
# - Document Root: /usr/share/nginx/html
# - Default Index: index.html
#
# Compression Settings:
# - Compression Method: gzip
# - Minimum File Size: 1024 bytes
# - Compressed Types: text/plain, text/css, text/xml, text/javascript, application/x-javascript, 
#   application/xml+rss, application/json
#
# Routing:
# - All requests are first checked against actual files/directories
# - If no match is found, requests are served with index.html to support client-side routing
#
# Caching Strategy:
# - Static assets (js, css, images, fonts) are cached for 1 year
# - Cache-Control header set to "public, immutable" for optimal browser caching
#
# Use Case: Ideal for serving React, Vue, Angular, or other SPA frameworks
server {
    listen 80;
    server_name localhost;

    root /usr/share/nginx/html;
    index index.html;

    # Enable gzip compression
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml+rss application/json;

    # Handle SPA routing - all routes should serve index.html
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Cache static assets
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
